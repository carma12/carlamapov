<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Hints and tips to make a successful migration"><title>Migrating PatternFly v4 to v5</title>
<link rel=canonical href=/p/pf4-to-pf5-migration/><link rel=stylesheet href=/scss/style.min.abbd69b2908fdfcd5179898beaafd374514a86538d81639ddd2c58c06ae54e40.css><meta property="og:title" content="Migrating PatternFly v4 to v5"><meta property="og:description" content="Hints and tips to make a successful migration"><meta property="og:url" content="/p/pf4-to-pf5-migration/"><meta property="og:site_name" content="Carla's blog"><meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:published_time" content="2023-12-19T00:00:00+00:00"><meta property="article:modified_time" content="2023-12-19T00:00:00+00:00"><meta property="og:image" content="/p/pf4-to-pf5-migration/andrew-ridley-jR4Zf-riEjI-unsplash.jpg"><meta name=twitter:title content="Migrating PatternFly v4 to v5"><meta name=twitter:description content="Hints and tips to make a successful migration"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="/p/pf4-to-pf5-migration/andrew-ridley-jR4Zf-riEjI-unsplash.jpg"><link rel="shortcut icon" href=monitor.png></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/carla-foto-avatar_hub3a225e99e99a974bb6bdd7600c66733_143742_300x0_resize_q75_box.jpg width=300 height=300 class=site-logo loading=lazy alt=Avatar></a></figure><div class=site-meta><h1 class=site-name><a href=/>Carla's blog</a></h1><h2 class=site-description>Frontend and UI design enthusiastic.</h2></div></header><ol class=social-menu><li><a href=https://github.com/carma12 target=_blank title=GitHub rel=me><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href='https://www.linkedin.com/in/carla-martinez-poveda/?locale=en_US' target=_blank title=LinkedIn rel=me><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-linkedin" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 4m0 2a2 2 0 012-2h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2z"/><path d="M8 11v5"/><path d="M8 8v.01"/><path d="M12 16v-5"/><path d="M16 16v-3a2 2 0 00-4 0"/></svg></a></li><li><a href=mailto:carlmart@redhat.com target=_blank title=Mail rel=me><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-mail" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 7a2 2 0 012-2h14a2 2 0 012 2v10a2 2 0 01-2 2H5a2 2 0 01-2-2V7z"/><path d="M3 7l9 6 9-6"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg><span>Home</span></a></li><li><a href=/archives/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg><span>Archives</span></a></li><li><a href=/search/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg><span>Search</span></a></li><li><a href=/links/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg><span>Links</span></a></li><div class=menu-bottom-section><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><span>Dark Mode</span></li></div></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#upgrade-pf-version>Upgrade PF version</a></li><li><a href=#patternfly-codemods>PatternFly Codemods</a><ol><li><a href=#pf-codemods>pf-codemods</a></li><li><a href=#class-name-updater>class-name-updater</a></li></ol></li><li><a href=#upgrade-deprecated-components>Upgrade deprecated components</a></li><li><a href=#leftovers-on-building>Leftovers on building</a></li><li><a href=#bonus-cypress>Bonus: Cypress</a></li></ol></nav></div></section></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/p/pf4-to-pf5-migration/><img src=/p/pf4-to-pf5-migration/andrew-ridley-jR4Zf-riEjI-unsplash_hu3d03a01dcc18bc5be0e67db3d8d209a6_2682219_800x0_resize_q75_box.jpg srcset="/p/pf4-to-pf5-migration/andrew-ridley-jR4Zf-riEjI-unsplash_hu3d03a01dcc18bc5be0e67db3d8d209a6_2682219_800x0_resize_q75_box.jpg 800w, /p/pf4-to-pf5-migration/andrew-ridley-jR4Zf-riEjI-unsplash_hu3d03a01dcc18bc5be0e67db3d8d209a6_2682219_1600x0_resize_q75_box.jpg 1600w" width=800 height=600 loading=lazy alt="Featured image of post Migrating PatternFly v4 to v5"></a></div><div class=article-details><header class=article-category><a href=/categories/patternfly/>PatternFly</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/p/pf4-to-pf5-migration/>Migrating PatternFly v4 to v5</a></h2><h3 class=article-subtitle>Hints and tips to make a successful migration</h3></div><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg><time class=article-time--published>Dec 19, 2023</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><time class=article-time--reading>6 minute read</time></div></footer></div></header><section class=article-content><h1 id=introduction>Introduction</h1><p><a class=link href=https://www.patternfly.org/ target=_blank rel=noopener>PatternFly 5</a> version was recently released in August 2023. This is a major upgrade of the previous version and has landed with some exciting new features. To mention some:</p><ul><li>It supports React versions 17 and 18</li><li>They introduce new federated modules: a collection of independent remote software modules (associated with microfrontends)</li><li>Updated implementation of some popular components: Wizard, Select, Dropdown, and Table</li><li>Acessibility improvements</li></ul><p>The PatternFly team has also announced that they will adopt an annual major release cadence, so we can expect a PatternFly 6 library for mid-late 2024. This also means that the previous version of PatternFly 4 library will be only maintained for addressing high-priority issues until PF6 is available, because they will be commited to maintain two PatternFly versions at the same time.</p><p>As a consumer of the previous one (PF4), this sounds really exciting and I couldn&rsquo;t wait to check the newly released PatternFly 5 library. So I would like to share my experience adapting this library to the <a class=link href=https://github.com/freeipa/freeipa-webui target=_blank rel=noopener>modern FreeIPA WebUI project</a> and providing some hints that I learned during the process. I hope this will help you for a successful migration ;-)</p><h1 id=migration-steps>Migration steps</h1><h2 id=upgrade-pf-version>Upgrade PF version</h2><p>The first step will be to upgrade the PatternFly libraries to its latest version. Easy as that.</p><p>In my case, as I&rsquo;m using NodeJS I can rely on the <code>npm</code> command to upgrade the three specific PF libraries in a single line:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=line><span class=cl><span class=go>npm install @patternfly/patternfly@latest @patternfly/react-core@latest @patternfly/react-table@latest
</span></span></span></code></pre></td></tr></table></div></div><p>The result:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=s2>&#34;dependencies&#34;</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;@patternfly/patternfly&#34;</span><span class=o>:</span> <span class=s2>&#34;^5.1.0&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;@patternfly/react-core&#34;</span><span class=o>:</span> <span class=s2>&#34;^5.1.1&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;@patternfly/react-table&#34;</span><span class=o>:</span> <span class=s2>&#34;^5.1.1&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=c1>// (...)
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>},</span>
</span></span></code></pre></td></tr></table></div></div><p>If your project uses any other PF library, the command mentioned above still will do the trick. Feel free to check the <a class=link href=https://www.patternfly.org/get-started/release-highlights/#promoted-package-versions target=_blank rel=noopener>promoted package versions</a>) for further information.</p><h2 id=patternfly-codemods>PatternFly Codemods</h2><p>To make the migration easier, the PatternFly team has released a set of codemods to easily change, identify, and fix major issues. These can automatically adapt and resolve a large amount of problems on the code and flag any component that might require manual update.</p><p>In the <a class=link href=https://www.patternfly.org/get-started/upgrade target=_blank rel=noopener>oficial guidelines</a>, they recommend to use two specific codemods:</p><ul><li><a class=link href=https://github.com/patternfly/pf-codemods/tree/main/packages/pf-codemods target=_blank rel=noopener>pf-codemods</a> is an eslint wrapper to update <code>@patternfly/react-core@4.x.x</code> code to <code>5.x.x</code>. It will also assign some deprecated components with the <code>@deprecated</code> library.</li><li><a class=link href=https://github.com/patternfly/pf-codemods/tree/main/packages/class-name-updater target=_blank rel=noopener>class-name-updater</a> automatically identifies Patternfly class names that need to be updated after the introduction of versioned class names in Patternfly v5. For example: the class <code>pf-u-mt-lg</code> will be transformed into <code>pf-v5-u-mt-lg</code>.</li></ul><p>Those can be run in several steps regardless of the order. And there is something else to take into account: those codemods are meant to be used <strong>before</strong> making any manual changes to the code. That means that those errors and warnings can still be there even when you have resolved them, leading to the &ldquo;what-did-just-happened??&rdquo; loop. So just to take it into account :-)</p><h3 id=pf-codemods>pf-codemods</h3><p>To use this codemod and check the errors and warnings, we just execute the following command:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=line><span class=cl><span class=go>npx @patternfly/pf-codemods@latest &lt;path-to-source-code&gt;
</span></span></span></code></pre></td></tr></table></div></div><p>To allow the autofix to apply changes into our code (I strongly recommend this approach), we add the <code>--fix</code> argument:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=line><span class=cl><span class=go>npx @patternfly/pf-codemods@latest &lt;path-to-source-code&gt; --fix
</span></span></span></code></pre></td></tr></table></div></div><h3 id=class-name-updater>class-name-updater</h3><p>This codemod works very similar as the one that was mentioned before: it can be executed to <em>check</em> the occurrencies or to <em>fix</em> them. The last one is the most useful in this case, IMHO.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=line><span class=cl><span class=go>npx @patternfly/class-name-updater &lt;path-to-source-code&gt; --fix
</span></span></span></code></pre></td></tr></table></div></div><h2 id=upgrade-deprecated-components>Upgrade deprecated components</h2><p>PatternFly 5 deprecates old implementations of some components in favor of new ones. These are:</p><ul><li><a class=link href=https://www.patternfly.org/components/menus/select/react-deprecated target=_blank rel=noopener>Select</a></li><li><a class=link href=https://www.patternfly.org/components/menus/dropdown/react-deprecated target=_blank rel=noopener>Dropdown</a></li><li><a class=link href=https://www.patternfly.org/components/table/react-deprecated target=_blank rel=noopener>Table</a></li><li><a class=link href=https://www.patternfly.org/components/wizard/react-deprecated target=_blank rel=noopener>Wizard</a></li><li><a class=link href=https://www.patternfly.org/components/menus/context-selector/ target=_blank rel=noopener>Context selector</a></li><li><a class=link href=https://www.patternfly.org/components/menus/application-launcher target=_blank rel=noopener>Application launcher</a></li><li><a class=link href=https://www.patternfly.org/components/menus/options-menu target=_blank rel=noopener>Options menu</a></li><li><a class=link href=https://www.patternfly.org/components/page/react-deprecated target=_blank rel=noopener>Page header</a></li></ul><p>Those will remain in the code base until, at least, the next major release (PF6).</p><p>So for those projects that started with the previous PF4 version (like the <a class=link href=https://github.com/freeipa/freeipa-webui target=_blank rel=noopener>new FreeIPA WebUI</a>), is important to adapt those components to use the new ones. In order to do so, we just need to search in your code any PatternFly library that has the <code>deprecated</code> suffix. E.g. using the <code>Select</code> components:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>Select</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>SelectOption</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>SelectVariant</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>SelectDirection</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>}</span> <span class=kr>from</span> <span class=s2>&#34;@patternfly/react-core/deprecated&#34;</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><p>Once we identify the deprecated components in our code, we just need to replace them by the non-deprecated ones referencing the <code>@patternfly/react-core</code> library.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>Select</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>SelectOption</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>SelectVariant</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>SelectDirection</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>}</span> <span class=kr>from</span> <span class=s2>&#34;@patternfly/react-core&#34;</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><p>It is important to note that some parameters and variables can be different from the deprecated version to the current one, so those will need to be changed. This effort may vary depending on how big is our project and the components used. Following the same example with the <code>Select</code> example:</p><p>Deprecated component:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>Select</span>
</span></span><span class=line><span class=cl>  <span class=na>id</span><span class=o>=</span><span class=s>&#34;revocation-certificate-authority&#34;</span>
</span></span><span class=line><span class=cl>  <span class=na>variant</span><span class=o>=</span><span class=s>&#34;single&#34;</span>
</span></span><span class=line><span class=cl>  <span class=na>placeholderText</span><span class=o>=</span><span class=s>&#34; &#34;</span>
</span></span><span class=line><span class=cl>  <span class=na>aria</span><span class=err>-</span><span class=na>label</span><span class=o>=</span><span class=s>&#34;Select a certificate authority for the revocation&#34;</span>
</span></span><span class=line><span class=cl>  <span class=na>aria</span><span class=err>-</span><span class=na>labelledby</span><span class=o>=</span><span class=s>&#34;revocation certificate authority&#34;</span>
</span></span><span class=line><span class=cl>  <span class=na>selections</span><span class=o>=</span><span class=p>{</span><span class=nx>CASelected</span><span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=na>isOpen</span><span class=o>=</span><span class=p>{</span><span class=nx>isCAOpen</span><span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=na>onToggle</span><span class=o>=</span><span class=p>{(</span><span class=nx>_event</span><span class=p>,</span> <span class=nx>isOpen</span>: <span class=kt>boolean</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=nx>onCAToggle</span><span class=p>(</span><span class=nx>isOpen</span><span class=p>)}</span>
</span></span><span class=line><span class=cl>  <span class=na>onSelect</span><span class=o>=</span><span class=p>{</span><span class=nx>onCASelect</span><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span><span class=nx>CAOptions</span><span class=p>.</span><span class=nx>map</span><span class=p>((</span><span class=nx>option</span><span class=p>,</span> <span class=nx>index</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>SelectOption</span> <span class=na>key</span><span class=o>=</span><span class=p>{</span><span class=nx>index</span><span class=p>}</span> <span class=na>value</span><span class=o>=</span><span class=p>{</span><span class=nx>option</span><span class=p>}</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>))}</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>Select</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>New component:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>Select</span>
</span></span><span class=line><span class=cl>  <span class=na>id</span><span class=o>=</span><span class=s>&#34;revocation-certificate-authority&#34;</span>
</span></span><span class=line><span class=cl>  <span class=na>aria</span><span class=err>-</span><span class=na>label</span><span class=o>=</span><span class=s>&#34;Select a certificate authority for the revocation&#34;</span>
</span></span><span class=line><span class=cl>  <span class=na>aria</span><span class=err>-</span><span class=na>labelledby</span><span class=o>=</span><span class=s>&#34;revocation certificate authority&#34;</span>
</span></span><span class=line><span class=cl>  <span class=na>selected</span><span class=o>=</span><span class=p>{</span><span class=nx>CASelected</span><span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=na>isOpen</span><span class=o>=</span><span class=p>{</span><span class=nx>isCAOpen</span><span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=na>toggle</span><span class=o>=</span><span class=p>{</span><span class=nx>toggleCASelect</span><span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=na>onSelect</span><span class=o>=</span><span class=p>{</span><span class=nx>onCASelect</span><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span><span class=nx>CAOptions</span><span class=p>.</span><span class=nx>map</span><span class=p>((</span><span class=nx>option</span><span class=p>,</span> <span class=nx>index</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>SelectOption</span> <span class=na>key</span><span class=o>=</span><span class=p>{</span><span class=nx>index</span><span class=p>}</span> <span class=na>value</span><span class=o>=</span><span class=p>{</span><span class=nx>option</span><span class=p>}&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span><span class=nx>option</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>SelectOption</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>))}</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>Select</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>Not only the <strong>component parameters</strong>, but also the expected <strong>method parameters</strong> can change. Following with the example as a reference, the <code>onToggle</code> parameter has been transformed into <code>toggle</code> and it must be returned as a reference:</p><p>New component:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=c1>// Toggle
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>toggleCASelect</span> <span class=o>=</span> <span class=p>(</span><span class=nx>toggleRef</span>: <span class=kt>React.Ref</span><span class=p>&lt;</span><span class=nt>MenuToggleElement</span><span class=p>&gt;)</span> <span class=o>=&gt;</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>MenuToggle</span> <span class=na>ref</span><span class=o>=</span><span class=p>{</span><span class=nx>toggleRef</span><span class=p>}</span> <span class=na>onClick</span><span class=o>=</span><span class=p>{</span><span class=nx>onCAToggle</span><span class=p>}</span> <span class=na>className</span><span class=o>=</span><span class=s>&#34;pf-v5-u-w-100&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span><span class=nx>CASelected</span><span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>MenuToggle</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=leftovers-on-building>Leftovers on building</h2><p>At this point, most (if not all) problems should be fixed. However, I strongly recommend to build your project and address any possible errors and leftovers in the code.</p><p>As the <a class=link href=https://github.com/freeipa/freeipa-webui target=_blank rel=noopener>new FreeIPA WebUI</a> is relying on Webpack, I just had to use the alias (<code>npm run start</code>). But if your React project uses another bundler such as <a class=link href=https://create-react-app.dev/ target=_blank rel=noopener>create-react-app</a>, you can build it via <code>npm run build</code>. In any case, a double-check on the project to detect any unexpected errors won&rsquo;t hurt.</p><h2 id=bonus-cypress>Bonus: Cypress</h2><p>Although this is not mentioned in the official guide, it is good to keep in mind when migrating in React projects.</p><p>If your project is using <a class=link href=https://www.cypress.io/ target=_blank rel=noopener>Cypress</a> to perform integration and/or e2e tests, you might also want to adapt the tests and replace old the class names to PatternFly 5 ones. As some of the components have changed their core structure, this will likely cause tests to fail if they are referencing deprecated structures. This only applies to the newly implemented components that we mentioned above.</p><p>E.g.: Cypress code using deprecated class names (<code>dropdown__toggle-text</code>):</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl> <span class=nx>cy</span><span class=p>.</span><span class=kr>get</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;div.pf-v5-c-masthead__content button span.pf-v5-c-dropdown__toggle-text&#34;</span>
</span></span><span class=line><span class=cl><span class=p>).</span><span class=nx>then</span><span class=p>((</span><span class=nx>$ele</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=p>{</span> <span class=p>...</span> <span class=p>};</span>
</span></span></code></pre></td></tr></table></div></div><p>E.g.: Cypress code using PF5 class names (<code>menu-toggle__text</code>):</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ts data-lang=ts><span class=line><span class=cl><span class=nx>cy</span><span class=p>.</span><span class=kr>get</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;div.pf-v5-c-masthead__content button span.pf-v5-c-menu-toggle__text&#34;</span>
</span></span><span class=line><span class=cl><span class=p>).</span><span class=nx>then</span><span class=p>((</span><span class=nx>$ele</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=p>{</span> <span class=p>...</span> <span class=p>};</span>
</span></span></code></pre></td></tr></table></div></div><h1 id=conclusions>Conclusions</h1><p>We have introduced the main PatternFly 5 key features and offered a comprehensive guide on migrating any React project to the latest version of the library. I think the PatternFly team did (and are already doing) a great job on this major release. Looking forward to see the next features.</p><p>As this guide is base on my personal experience, some gaps and corner cases might have been not covered enough, so any comments or extra tips are more than welcome. Thanks for reading!</p><blockquote><p>Photo by <a href="https://unsplash.com/@aridley88?utm_content=creditCopyText&utm_medium=referral&utm_source=unsplash">Andrew Ridley</a> on <a href="https://unsplash.com/photos/a-multicolored-tile-wall-with-a-pattern-of-small-squares-jR4Zf-riEjI?utm_content=creditCopyText&utm_medium=referral&utm_source=unsplash">Unsplash</a></p></blockquote></section><footer class=article-footer><section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg><span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><div class=disqus-container><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//carlamapov.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><style>.disqus-container{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding)}</style><script>window.addEventListener("onColorSchemeChange",e=>{typeof DISQUS=="object"&&DISQUS.reset({reload:!0})})</script><footer class=site-footer><section class=copyright>&copy;
2023 Carla's blog</section><section class=powerby>Monitor favicon created by Freepik<br>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.21.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>